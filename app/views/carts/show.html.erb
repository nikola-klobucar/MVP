<% if !@order_item.nil? && @order_item.errors.any? %>
  <ul>
    <% @order_item.errors.full_messages.each do |msg| %>
        <li> <%= msg %> </li>
    <% end %>
  </ul>
<% end %>

<% if @order_items.size > 0 %>
  <% @order_items.each do |item| %>
    <tr>
        <td><%=  item.product.name %></td>
        <td><%=  item.product.product_code %></td>
        <td><%=  item.product.description %></td>
        <td><%=  item.product.specs %></td>
        <td>
            <%= form_for(item, remote: true, method: :patch) do |f| %>
                <%= f.hidden_field :product_id, value: item.product.id %>
                <%=  item.product.price %>
                <%= f.text_field :quantity, value: item.quantity.to_i, min: 1, class: 'form-control' %>
                <%= f.submit "Update Quantity", class: 'btn btn-primary' %>
                <%= link_to 'Delete', item, method: :delete, remote: true, class: 'btn btn-danger' %>
                <span>Total Price: <%= item.total_price %> </span>
            <% end %>
        </td>
    </tr>
  <% end %>
  <br>
  <div class="pay-button">
    <%= link_to "Pay", orders_path(@order), class: 'btn btn-primary' %>
  </div>
    

<% else %>
  
<% end %>